{
    "$schema": "https://json-schema.org/draft-07/schema",
    "title": "FDB diff",
    "type": "object",
    "properties": {
        "additionalProperties": false,
        "objects": {
            "description": "objects to add, edit or delete",
            "type": "array",
            "items": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "id": {
                        "description": "namespace:identifier",
                        "type": "string"
                    },
                    "action": {
                        "description": "whether you want to add, edit or delete this object. default action is add.",
                        "type": "string",
                        "enum": ["edit", "add", "delete"],
                        "default": "add"
                    },
                    "components": {
                        "type": "array",
                        "description": "components for this object",
                        "items": {
                            "oneOf": [
                                { "$ref": "#/componentDefinitions/itemComponent" },
                                { "type": "string" }
                            ],
                            "uniqueItems": true
                        }
                    },
                    "values": {
                        "description": "values for the Objects table. id is auto-generated by the mod installation tool.",
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                            "name": {
                                "type": "string"
                            },
                            "placeable": {
                                "type": "boolean"
                            },
                            "type": {
                                "type": "string"
                            },
                            "description": {
                                "type": "string"
                            },
                            "localize": {
                                "type": "boolean"
                            },
                            "npcTemplateID": {
                                "type": "integer",
                                "minimum": 0
                            },
                            "displayName": {
                                "type": "string"
                            },
                            "interactionDistance": {
                                "type": "number",
                                "minimum": 0
                            },
                            "nametag": {
                                "type": "boolean"
                            },
                            "_internalNotes": {
                                "type": "string"
                            },
                            "locStatus": {
                                "type": "integer",
                                "minimum": 0,
                                "maximum": 2
                            },
                            "gate_version": {
                                "type": "string"
                            },
                            "HQ_valid": {
                                "type": "boolean"
                            }
                        }
                    }
                }
            }
        },
        "components": {
            "description": "components (instances of components) to add, edit or delete",
            "type": "array",
            "items": {
                "oneOf": [
                    { "$ref": "#/componentDefinitions/itemComponent" }
                ]
            }
        }
    },
    
    "componentDefinitions": {
        "description": "Definitions of all components supported by the tool",
        "itemComponent": {
            "type": "object",
            "additionalProperties": false,
            "required": ["componentType"],
            "properties": {
                "id": {
                    "description": "namespace:identifier",
                    "type": "string"
                },
                "action": {
                    "description": "whether you want to add, edit or delete this component. default action is add.",
                    "type": "string",
                    "enum": ["edit", "add", "delete"],
                    "default": "add"
                },
                "componentType": {
                    "const": "ItemComponent"
                },
                "values": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                        "equipLocation": {
                            "type": "string"
                        },
                        "baseValue": {
                            "type": "integer"
                        },
                        "isKitPiece": {
                            "type": "boolean"
                        },
                        "rarity": {
                            "type": "integer"
                        },
                        "itemType": {
                            "type": "integer"
                        },
                        "itemInfo": {
                            "type": "integer"
                        },
                        "inLootTable": {
                            "type": "boolean"
                        },
                        "inVendor": {
                            "type": "boolean"
                        },
                        "isUnique": {
                            "type": "boolean"
                        },
                        "isBOP": {
                            "type": "boolean"
                        },
                        "isBOE": {
                            "type": "boolean"
                        },
                        "reqFlagID": {
                            "type": "integer"
                        },
                        "reqSpecialtyID": {
                            "type": "integer"
                        },
                        "reqSpecRank": {
                            "type": "integer"
                        },
                        "reqAchievementID": {
                            "type": "integer"
                        },
                        "stackSize": {
                            "type": "integer"
                        },
                        "color1": {
                            "type": "integer"
                        },
                        "decal": {
                            "type": "integer"
                        },
                        "offsetGroupID": {
                            "type": "integer"
                        },
                        "buildTypes": {
                            "type": "integer"
                        },
                        "reqPrecondition": {
                            "type": "string"
                        },
                        "animationFlag": {
                            "type": "integer"
                        },
                        "equipEffects": {
                            "type": "integer"
                        },
                        "readyForQA": {
                            "type": "boolean"
                        },
                        "itemRating": {
                            "type": "integer"
                        },
                        "isTwoHanded": {
                            "type": "boolean"
                        },
                        "minNumRequired": {
                            "type": "integer"
                        },
                        "delResIndex": {
                            "type": "integer"
                        },
                        "currencyLOT": {
                            "type": "integer"
                        },
                        "altCurrencyCost": {
                            "type": "integer"
                        },
                        "subItems": {
                            "type": "string",
                            "description": "TODO: string w/ specific format (lot,lot,lot,...)"
                        },
                        "audioEventUse": {
                            "type": "string"
                        },
                        "noEquipAnimation": {
                            "type": "integer"
                        },
                        "commendationLOT": {
                            "type": "integer"
                        },
                        "commendationCost": {
                            "type": "integer"
                        },
                        "audioEquipMetaEventSet": {
                            "type": "string"
                        },
                        "currencyCosts": {
                            "type": "string",
                            "description": "TODO: string w/ specific format (lot:count,lot:count,...)"
                        },
                        "ingredientInfo": {
                            "type": "string"
                        },
                        "locStatus": {
                            "type": "integer"
                        },
                        "forgeType": {
                            "type": "integer"
                        },
                        "SellMultiplier": {
                            "type": "number"
                        }
                    }
                }
            }
        }
    }
}
